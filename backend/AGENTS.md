# `backend/` ディレクトリのAGENTルール

このディレクトリには、FastAPI を用いた Web アプリケーションのバックエンドコードが含まれています。

## 構造と役割

- `app/`: FastAPI アプリケーションの主要なソースコード。ルーティング、ビジネスロジック、モデル、サービスなどが含まれます。
- `tests/`: バックエンドアプリケーションのユニットテストおよび統合テストが含まれます。
- `Dockerfile`: バックエンドアプリケーションを Docker コンテナとしてビルドするための定義ファイル。
- `requirements.txt`: バックエンドアプリケーションのPython依存関係が記述されています。

## 主要なコンポーネント

- `app/main.py`: FastAPI アプリケーションのエントリポイント。API ルートの定義とアプリケーションの初期化を行います。
- `app/core/config.py`: アプリケーション全体の設定を管理します。環境変数からの値の読み込みとデフォルト値の提供を行います。
- `app/services/worker.py`: バックグラウンドで動作し、iTunes API から楽曲データを取得し、キューを補充するワーカーロジックが含まれます。

## AIエージェントへの指示

- バックエンドの機能追加や変更を行う際は、`app/` ディレクトリ内の適切なモジュールを特定し、変更を加えてください。
- テストを必ず記述し、既存のテストが壊れていないことを確認してください。`tests/` ディレクトリに新しいテストファイルを追加するか、既存のテストファイルを更新してください。
- 環境変数に関する設定を変更する場合は、`app/core/config.py` を更新し、必要に応じて `README.md` の環境変数セクションも更新してください。
- 依存関係を追加する場合は、`requirements.txt` を更新してください。