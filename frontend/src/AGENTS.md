# `frontend/src/` ディレクトリの AGENT ルール

このディレクトリには、Next.js アプリケーションの主要なソースコードが含まれています。

## 構造と役割

- `app/`: Next.js の App Router を利用したルート定義とページコンポーネントが含まれます。
- `components/`: アプリケーション全体で再利用される UI コンポーネントが含まれます。`RequireAuth` などの認証関連 UI もここに配置されています。
- `contexts/`: アプリ全体で共有する状態を提供する React Context。`AuthContext` が JWT セッション管理を担います。
- `hooks/`: カスタム React Hooks が含まれ、コンポーネント間でロジックを再利用可能にします。
- `lib/`: ユーティリティ関数、定数、ストレージ関連のロジックなど、アプリケーション全体で利用される共通のヘルパーコードが含まれます。
- `services/`: バックエンド API との通信を行うクライアントコードや、その他の外部サービス連携ロジックが含まれます。

## 主要なコンポーネント

- `app/layout.tsx`: アプリケーションのルートレイアウトを定義します。
- `app/page.tsx`: アプリケーションのホームページ。
- `components/AppHeader.tsx`: アプリケーションのヘッダーコンポーネント。ログイン状態に応じて表示を切り替えます。
- `components/RequireAuth.tsx`: 認証が必要なページを保護するラッパーコンポーネント。
- `hooks/useAudioPlayer.ts`: オーディオ再生を制御するカスタムフック。
- `contexts/AuthContext.tsx`: ログイン・ログアウト、トークンリフレッシュなどを提供する Context。
- `lib/utils.ts`: 一般的なユーティリティ関数。
- `services/api-client.ts`: バックエンド API との通信を行うクライアント。

## AI エージェントへの指示

- 新しいページやルーティングを追加する場合は、`app/` ディレクトリ内に適切なディレクトリ構造を作成し、`page.tsx` や `layout.tsx` などのファイルを配置してください。
- UI 要素を開発する場合は、まず `components/` ディレクトリ内で再利用可能なコンポーネントとして実装することを検討してください。
- 認証状態を直接変更する場合は `AuthContext` を利用し、`localStorage` を個別に操作しないことを推奨します。
- コンポーネントのロジックを分離・再利用したい場合は、`hooks/` ディレクトリにカスタムフックを作成してください。
- アプリケーション全体で利用する共通の関数や定数を追加する場合は、`lib/` ディレクトリを使用してください。
- バックエンド API との連携を拡張する場合は、`services/` ディレクトリ内の既存のクライアントを拡張するか、新しいクライアントを作成してください。`NEXT_PUBLIC_API_URL` を利用してベース URL を統一します。
