# `frontend/src/app/` ディレクトリの AGENT ルール

このディレクトリには、Next.js の App Router を利用したルート定義とページコンポーネントが含まれます。

## 構造と役割

- `layout.tsx`: 各ルートセグメントの UI を共有するレイアウトコンポーネント。アプリケーション全体のレイアウトや、特定のルートグループのレイアウトを定義します。
- `page.tsx`: ルートセグメントのユニークな UI を定義するページコンポーネント。このファイルが存在するディレクトリがそのルートのパスになります。
- `api/`: API Routes の定義が含まれます。バックエンド API との通信を抽象化したり、サーバーサイドのロジックを実装するために使用します。
- その他のディレクトリ: ルーティング構造に基づいて、各ページやルートグループに対応するディレクトリが配置されます。`login/`, `register/`, `library/` など認証関連のページもここに含まれます。

## 主要なコンポーネント

- `layout.tsx`: 共通のヘッダー、フッター、ナビゲーションなどを配置し、アプリケーション全体で一貫した UI を提供します。
- `page.tsx`: 各ページのコンテンツをレンダリングします。`library/page.tsx` や `swipe/page.tsx` など、認証が必要なページでは `RequireAuth` を組み合わせて保護します。
- `swipe/page.tsx`: アプリのコア体験であるスワイプ UI を提供します。ログイン済みユーザーの評価結果をバックエンドの `/api/v1/evaluations` と同期し、ページ初期表示時に過去の評価をフェッチします。
- `api/health/route.ts`: ヘルスチェックのエンドポイント。

## AI エージェントへの指示

- 新しいページを作成する場合は、このディレクトリ内に新しいディレクトリを作成し、その中に `page.tsx` ファイルを配置してください。
- 既存のページのレイアウトを変更する場合は、関連する `layout.tsx` ファイルを修正してください。
- 認証が必要なページを追加する場合は、`AuthContext` から状態を取得して `RequireAuth` などの仕組みを組み合わせてください。評価データや再生履歴のようにユーザー単位で永続化する情報はローカルストレージではなくバックエンド API（例: `/api/v1/evaluations`, `/api/v1/history/played`）を利用してください。
- サーバーサイドで動作する API エンドポイントを追加する場合は、`api/` ディレクトリ内に新しいルートファイルを作成してください。
